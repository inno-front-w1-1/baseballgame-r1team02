<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      <label>ì •ë‹µì„ ì ì–´ì£¼ì„¸ìš©</label>
      <input type="text" maxlength="3" id="answer" />
      <button id="Bu">ì •ë‹µì œì¶œ</button>
    </div>

    <button id="reset">ìƒˆê²Œì„</button>

    <ul id="score">
      <li>ì ìˆ˜íŒ!</li>
    </ul>
  </body>
  <script>
    function ranMath() {
      let a = String(Math.random() * 1e16);

      let rnum = new Set();
      for (const z of a.split("")) {
        if (rnum.has(z)) {
          continue;
        } else {
          rnum.add(z);
        }
        if ([...rnum].length == 3) {
          return [...rnum];
        }
      }ã„´
      console.log("3ê°œ ì•ˆë¨");
      ranMath();
    }

    function submit_A(in_val) {
      let submit_A = [...new Set(in_val)].length == 3;
      console.log(submit_A);
      if (!submit_A) {
        alert("ì¤‘ë³µëœ ìˆ«ìê°€ ìˆê±°ë‚˜ ìˆ«ìê°¯ìˆ˜ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤");
      }
      return submit_A;
    }

    let answer = ranMath();
    let submit_button = document.getElementById("Bu");
    let reset = document.getElementById("reset");
    let log = document.getElementById("score");

    function Correct() {
      const in_value = document.getElementById("answer").value;
      document.getElementById("answer").value=""

      if (submit_A(in_value.split("")) && valid(in_value)) {
        // ----------------------- ì¶”ê°€í•œ ë¶€ë¶„ ------------------------

        let strikes = 0;
        let balls = 0;
        for (let i = 0; i < 3; i++) {
          if (answer[i] === in_value[i]) {
            strikes++;
          } else if (answer.includes(in_value[i])) {
            balls++;
          }
        }
        if (strikes === 3) {
          alert("ì •ë‹µ!! ğŸ‘ğŸ‘ğŸ‘");
          log.innerHTML += `<li>ì •ë‹µ: ${in_value}</li>`;
          submit_button.disabled = true;
        } else {
          log.innerHTML += `<li>ì…ë ¥ê°’: ${in_value} (ìŠ¤íŠ¸ë¼ì´í¬: ${strikes}, ë³¼: ${balls})</li>`;
        }
      }

      // ---------------------------------------------------------
    }

    function newGame() {
      answer = ranMath();
      log.innerHTML = "<li>ì ìˆ˜íŒ!</li>";
      document.getElementById("answer").value = "";
      submit_button.disabled = false;
    }

    function valid(input) {
      let vare = /^[0-9]+$/;
      if (vare.test(input)) {
        console.log("í†µê³¼");
        return true;
      } else {
        alert("ìˆ«ì ì´ì™¸ì˜ ë¬¸ìê°€ ë“¤ì–´ê°”ìŠµë‹ˆë‹¤");
        return false;
      }
    }

    reset.addEventListener("click", () => newGame());
    submit_button.addEventListener("click", () => Correct());
  </script>
</html>
